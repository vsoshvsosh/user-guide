# Отчетность по электронной почте

Gophish поддерживает возможность для пользователей сообщать о симулированных фишинговых письмах, которые они получают. Это делается для того, чтобы поощрять пользователей сообщать о подозрительных письмах своим администраторам, потенциально обнаруживая вредоносные письма раньше.

На данный момент мы поддерживаем эту функцию отчетности только на **серверной стороне**. Хотя у нас еще нет фактических расширений и дополнений для электронной почты, которые могли бы быть использованы для облегчения этой отчетности, начиная с версии v0.9.0, мы поддерживаем отчетность по электронной почте через IMAP.

## Важность отчетности по электронной почте

При проведении фишинговых симуляций мы часто фокусируемся исключительно на том, сколько пользователей нажало на ссылки и предоставило свои учетные данные на поддельной странице. Однако я бы утверждал, что не менее, если не более ценно сосредоточиться на том, кто сообщил о письмах своему администратору.

Рассмотрим простой сценарий, когда мы отправляем 100 симулированных фишинговых писем. Давайте рассмотрим два возможных исхода:

* **Исход 1** - В этом исходе только 1 пользователь нажимает на ссылку и предоставляет учетные данные. Это отлично! Однако, никто не сообщает о письме. В этом случае, как администратор, наши пользователи были целью фишинга, и злоумышленник имеет действительный набор учетных данных, но мы не знаем, что что-то произошло.
* **Исход 2** - В этом исходе 50 пользователей нажимают на ссылку, и только 1 пользователь сообщает об этом. В этом случае, конечно, больше пользователей нажали на ссылку, но как администратор мы теперь знаем, что идет фишинговая кампания, и мы можем начать процесс реагирования на инцидент.

Сообщение о подозрительных письмах может помочь предотвратить влияние фишинговой кампании. Рекомендуется создать культуру, которая **вознаграждает пользователей, сообщающих о письмах**. Даже что-то незначительное, как электронное письмо этому сотруднику и его руководителю с благодарностью за их бдительность, может иметь большое значение. Это дает положительную обратную связь, которая будет поощрять пользователей сообщать о большем количестве писем в будущем.

## Отчетность через IMAP

Распространенной (и хорошей!) практикой для организаций является создание адреса электронной почты, такого как security@example.com, и поощрение сотрудников пересылать любые подозрительные письма. Это отличный способ работать над построением совместных отношений между сотрудником и командой безопасности.

Начиная с версии v0.9.0, Gophish имеет возможность проверять настроенный почтовый ящик через IMAP на наличие писем кампании, о которых сообщили. Как только письмо кампании найдено, этот результат обновляется, чтобы показать, что пользователь сообщил о письме.

Каждый пользователь Gophish имеет возможность настроить свои собственные параметры IMAP. Эти настройки находятся в разделе "Account Settings > Reporting Settings" (Настройки учетной записи > Настройки отчетности).

![Настройки конфигурации IMAP](../.gitbook/assets/screen-shot-2020-01-20-at-11.15.48-am.png)

Наиболее распространенными настройками, которые вам понадобятся, являются имя хоста IMAP, порт, имя пользователя и пароль. Обычно вы захотите включить TLS, но это следует подтвердить у вашего провайдера электронной почты.

### Расширенные настройки

Существует также ряд расширенных настроек, которые позволяют вам настроить, в какой папке будут перечислены письма кампании или как часто Gophish должен проверять наличие новых результатов. Кроме того, вы можете ограничить его рассмотрением только писем, о которых сообщили с адреса с доменным именем вашей организации. Наконец, Gophish может по желанию удалять письма кампании после того, как о них сообщили.

![Расширенные настройки IMAP](../.gitbook/assets/screen-shot-2020-01-20-at-11.19.46-am.png)

После настройки параметров IMAP вы можете либо сохранить их, либо использовать кнопку "Test Settings" (Проверить настройки), чтобы подтвердить, что Gophish может установить соединение IMAP.

## Как работает отчетность в Gophish

Каждое письмо, отправленное Gophish, содержит ссылку, указывающую на [целевую страницу](landing-pages.md), настроенную для кампании. Этот URL выглядит так:

```text
http://phish_server/?rid=1234567
```

Параметр `rid` указывает, для какого получателя была создана эта ссылка. Чтобы сообщить о письме, отправленном Gophish, необходимо сделать HTTP-запрос на:

```text
http://phish_server/report?rid=1234567
```

Отправка этого HTTP-запроса обычно обрабатывается расширением почтового клиента. Как указано ранее, мы все еще работаем над их разработкой. Если вы заинтересованы в том, чтобы помочь в реализации этого, пожалуйста, [откройте issue на Github!](https://github.com/gophish/gophish/issues)

